<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for question_cloze_test_processor.class.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file question_cloze_test_processor.class.php</h1>
<p>Documentation is available at <a href="../questions/_meta---question_cloze_test_processor.class.php.html">question_cloze_test_processor.class.php</a></p>
<div class="src-code">
<div class="src-code"><ol><li><div class="src-line"><a name="a1"></a><span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line"><a name="a2"></a><span class="src-doc">/**</span></div></li>
<li><div class="src-line"><a name="a3"></a><span class="src-doc">&nbsp;*&nbsp;&lt;pre&gt;</span></div></li>
<li><div class="src-line"><a name="a4"></a><span class="src-doc">&nbsp;*&nbsp;完形填空，有大Question和子Question，每个子Question都有Option，每个Option都是大写字母且后面至少有个标识表示</span></div></li>
<li><div class="src-line"><a name="a5"></a><span class="src-doc">&nbsp;*&nbsp;</span></div></li>
<li><div class="src-line"><a name="a6"></a><span class="src-doc">&nbsp;*&nbsp;题型模板：</span></div></li>
<li><div class="src-line"><a name="a7"></a><span class="src-doc">&nbsp;*&nbsp;&lt;ul&gt;</span></div></li>
<li><div class="src-line"><a name="a8"></a><span class="src-doc">&nbsp;*&nbsp;&lt;li&gt;题号定义：半角两位以内的数字形式，支持的修饰符有&lt;u&gt;()（）、.．&lt;/u&gt;符号有全半角之分，所有前缀修饰符均可选，至少要有一个后缀修饰符，必须位于行首&lt;/li&gt;</span></div></li>
<li><div class="src-line"><a name="a9"></a><span class="src-doc">&nbsp;*&nbsp;&lt;li&gt;选项编号定义：半角大写英文字母形式，支持的修饰符有&lt;u&gt;()（）、.．&lt;/u&gt;符号有全半角之分，所有前缀修饰符均可选&lt;/li&gt;</span></div></li>
<li><div class="src-line"><a name="a10"></a><span class="src-doc">&nbsp;*&nbsp;&lt;li&gt;样式定义：参考以下例子，首尾用“完形填空”注明，每题需要有“正文结束”和“选项结束”注明&lt;/li&gt;</span></div></li>
<li><div class="src-line"><a name="a11"></a><span class="src-doc">&nbsp;*&nbsp;&lt;li&gt;注意：选项内不允许出现与题号或选项编号样式相同的字样，如果有，请改写成全角数字来解决冲突&lt;/li&gt;</span></div></li>
<li><div class="src-line"><a name="a12"></a><span class="src-doc">&nbsp;*&nbsp;&lt;/ul&gt;</span></div></li>
<li><div class="src-line"><a name="a13"></a><span class="src-doc">&nbsp;*&nbsp;</span></div></li>
<li><div class="src-line"><a name="a14"></a><span class="src-doc">&nbsp;*&nbsp;题型举例：</span></div></li>
<li><div class="src-line"><a name="a15"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;完形填空&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a16"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;Mr.&nbsp;Green&nbsp;was&nbsp;ill&nbsp;and&nbsp;went&nbsp;to&nbsp;the&nbsp;hospital.&nbsp;A&nbsp;doctor&nbsp;__1__&nbsp;and&nbsp;said,&nbsp;“Well,&nbsp;Mr.&nbsp;Green,&nbsp;you&nbsp;are&nbsp;going&nbsp;to&nbsp;__2__&nbsp;some&nbsp;injections,&nbsp;and&nbsp;you’ll&nbsp;feel&nbsp;much&nbsp;better.&nbsp;A&nbsp;nurse&nbsp;will&nbsp;come&nbsp;__3__&nbsp;give&nbsp;you&nbsp;the&nbsp;first&nbsp;one&nbsp;this&nbsp;evening,&nbsp;and&nbsp;then&nbsp;you’ll&nbsp;__4__&nbsp;get&nbsp;another&nbsp;one&nbsp;tomorrow&nbsp;evening.”&nbsp;__5__&nbsp;a&nbsp;young&nbsp;nurse&nbsp;came&nbsp;to&nbsp;Mr.&nbsp;Green’s&nbsp;bed&nbsp;and&nbsp;said&nbsp;to&nbsp;him,&nbsp;“I&nbsp;am&nbsp;going&nbsp;to&nbsp;give&nbsp;you&nbsp;your&nbsp;__6__&nbsp;injection&nbsp;now,&nbsp;Mr.&nbsp;Green.&nbsp;Where&nbsp;do&nbsp;you&nbsp;want&nbsp;it?”</span></div></li>
<li><div class="src-line"><a name="a17"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;The&nbsp;old&nbsp;man&nbsp;was&nbsp;__7__.&nbsp;He&nbsp;looked&nbsp;at&nbsp;the&nbsp;nurse&nbsp;for&nbsp;a&nbsp;__8__,&nbsp;then&nbsp;he&nbsp;said,&nbsp;“__9__&nbsp;has&nbsp;ever&nbsp;let&nbsp;me&nbsp;choose&nbsp;that&nbsp;before.&nbsp;Are&nbsp;you&nbsp;really&nbsp;going&nbsp;to&nbsp;let&nbsp;me&nbsp;choose&nbsp;now?”</span></div></li>
<li><div class="src-line"><a name="a18"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;“Yes,&nbsp;Mr.&nbsp;Green,”&nbsp;the&nbsp;nurse&nbsp;answered.&nbsp;She&nbsp;was&nbsp;in&nbsp;a&nbsp;hurry.&nbsp;“Where&nbsp;do&nbsp;you&nbsp;want&nbsp;it?”</span></div></li>
<li><div class="src-line"><a name="a19"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;“Well,&nbsp;then,”&nbsp;the&nbsp;old&nbsp;man&nbsp;answered&nbsp;__10__&nbsp;“I&nbsp;want&nbsp;it&nbsp;in&nbsp;your&nbsp;left&nbsp;arm,&nbsp;please.”</span></div></li>
<li><div class="src-line"><a name="a20"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;正文结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a21"></a><span class="src-doc">&nbsp;*&nbsp;1.&nbsp;A.&nbsp;looked&nbsp;for&nbsp;him&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;looked&nbsp;him&nbsp;over</span></div></li>
<li><div class="src-line"><a name="a22"></a><span class="src-doc">&nbsp;*&nbsp;C.&nbsp;looked&nbsp;after&nbsp;him&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;looked&nbsp;him&nbsp;up</span></div></li>
<li><div class="src-line"><a name="a23"></a><span class="src-doc">&nbsp;*&nbsp;2.&nbsp;A.&nbsp;get&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;give&nbsp;&nbsp;&nbsp;&nbsp;C.&nbsp;make&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;hold</span></div></li>
<li><div class="src-line"><a name="a24"></a><span class="src-doc">&nbsp;*&nbsp;3.&nbsp;A.&nbsp;so&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;but&nbsp;&nbsp;&nbsp;&nbsp;C.&nbsp;or&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;and</span></div></li>
<li><div class="src-line"><a name="a25"></a><span class="src-doc">&nbsp;*&nbsp;4.&nbsp;A.&nbsp;must&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;can&nbsp;&nbsp;&nbsp;C.&nbsp;had&nbsp;better&nbsp;&nbsp;&nbsp;D.&nbsp;have&nbsp;to</span></div></li>
<li><div class="src-line"><a name="a26"></a><span class="src-doc">&nbsp;*&nbsp;5.&nbsp;A.&nbsp;In&nbsp;the&nbsp;morning&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;In&nbsp;the&nbsp;afternoon</span></div></li>
<li><div class="src-line"><a name="a27"></a><span class="src-doc">&nbsp;*&nbsp;C.&nbsp;In&nbsp;the&nbsp;end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;In&nbsp;the&nbsp;evening</span></div></li>
<li><div class="src-line"><a name="a28"></a><span class="src-doc">&nbsp;*&nbsp;6.&nbsp;A.&nbsp;first&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;one&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C.&nbsp;two&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;second</span></div></li>
<li><div class="src-line"><a name="a29"></a><span class="src-doc">&nbsp;*&nbsp;7.&nbsp;A.&nbsp;confident&nbsp;&nbsp;&nbsp;B.&nbsp;surprised&nbsp;&nbsp;&nbsp;C.&nbsp;full&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;hungry</span></div></li>
<li><div class="src-line"><a name="a30"></a><span class="src-doc">&nbsp;*&nbsp;8.&nbsp;A.&nbsp;hour&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;minutes&nbsp;&nbsp;&nbsp;&nbsp;C.&nbsp;year&nbsp;&nbsp;&nbsp;D.&nbsp;moment</span></div></li>
<li><div class="src-line"><a name="a31"></a><span class="src-doc">&nbsp;*&nbsp;9.&nbsp;A.&nbsp;Somebody&nbsp;&nbsp;B.&nbsp;Anybody&nbsp;&nbsp;&nbsp;C.&nbsp;Nobody&nbsp;&nbsp;&nbsp;D.&nbsp;people</span></div></li>
<li><div class="src-line"><a name="a32"></a><span class="src-doc">&nbsp;*&nbsp;10.&nbsp;A.&nbsp;with&nbsp;a&nbsp;smile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;in&nbsp;time</span></div></li>
<li><div class="src-line"><a name="a33"></a><span class="src-doc">&nbsp;*&nbsp;C.&nbsp;in&nbsp;surprise&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.&nbsp;with&nbsp;tears&nbsp;in&nbsp;his&nbsp;eyes</span></div></li>
<li><div class="src-line"><a name="a34"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;选项结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a35"></a><span class="src-doc">&nbsp;*&nbsp;One&nbsp;winter&nbsp;Nasreddin&nbsp;had&nbsp;very&nbsp;1&nbsp;money.His&nbsp;crops&nbsp;2&nbsp;very&nbsp;bad&nbsp;that&nbsp;year,and&nbsp;he&nbsp;3&nbsp;live&nbsp;very&nbsp;cheaply.He&nbsp;gave&nbsp;his&nbsp;donkey&nbsp;less&nbsp;food,and&nbsp;when&nbsp;after&nbsp;two&nbsp;days&nbsp;the&nbsp;donkey&nbsp;4&nbsp;just&nbsp;the&nbsp;same,he&nbsp;5&nbsp;to&nbsp;himself,&quot;The&nbsp;donkey&nbsp;was&nbsp;used&nbsp;to&nbsp;6&nbsp;a&nbsp;lot.Now&nbsp;he&nbsp;is&nbsp;quickly&nbsp;getting&nbsp;used&nbsp;to&nbsp;eating&nbsp;less;&nbsp;and&nbsp;soon&nbsp;he&nbsp;will&nbsp;get&nbsp;used&nbsp;to&nbsp;living&nbsp;7&nbsp;almost&nbsp;nothing.&quot;</span></div></li>
<li><div class="src-line"><a name="a36"></a><span class="src-doc">&nbsp;*&nbsp;Each&nbsp;day&nbsp;Nasreddin&nbsp;gave&nbsp;the&nbsp;donkey&nbsp;a&nbsp;little&nbsp;8&nbsp;food,&nbsp;until&nbsp;it&nbsp;was&nbsp;hardly&nbsp;eating&nbsp;anything.</span></div></li>
<li><div class="src-line"><a name="a37"></a><span class="src-doc">&nbsp;*&nbsp;Then&nbsp;one&nbsp;day,when&nbsp;the&nbsp;donkey&nbsp;was&nbsp;going&nbsp;to&nbsp;market&nbsp;with&nbsp;a&nbsp;load&nbsp;of&nbsp;wood&nbsp;on&nbsp;its&nbsp;back,&nbsp;it&nbsp;suddenly&nbsp;9&nbsp;.&nbsp;&quot;How&nbsp;unlucky&nbsp;I&nbsp;am,&quot;said&nbsp;Nasreddin,&quot;Just&nbsp;when&nbsp;my&nbsp;donkey&nbsp;had&nbsp;got&nbsp;used&nbsp;to&nbsp;eating&nbsp;hardly&nbsp;anything,it&nbsp;came&nbsp;1&nbsp;0&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;days&nbsp;in&nbsp;this&nbsp;world.</span></div></li>
<li><div class="src-line"><a name="a38"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;正文结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a39"></a><span class="src-doc">&nbsp;*&nbsp;1.A.few&nbsp;B.&nbsp;little&nbsp;C.&nbsp;lot&nbsp;D.&nbsp;much</span></div></li>
<li><div class="src-line"><a name="a40"></a><span class="src-doc">&nbsp;*&nbsp;2.A.had&nbsp;been&nbsp;B.&nbsp;has&nbsp;been&nbsp;C.&nbsp;was&nbsp;being&nbsp;D.&nbsp;is&nbsp;being</span></div></li>
<li><div class="src-line"><a name="a41"></a><span class="src-doc">&nbsp;*&nbsp;3.A.has&nbsp;to&nbsp;B.&nbsp;have&nbsp;to&nbsp;C.&nbsp;had&nbsp;to&nbsp;D.&nbsp;must&nbsp;have&nbsp;to</span></div></li>
<li><div class="src-line"><a name="a42"></a><span class="src-doc">&nbsp;*&nbsp;4.A.1ooks&nbsp;B.&nbsp;is&nbsp;seen&nbsp;C.&nbsp;looked&nbsp;D.&nbsp;was&nbsp;seen</span></div></li>
<li><div class="src-line"><a name="a43"></a><span class="src-doc">&nbsp;*&nbsp;5.A.says&nbsp;B.&nbsp;say&nbsp;C.&nbsp;saying&nbsp;D.&nbsp;said</span></div></li>
<li><div class="src-line"><a name="a44"></a><span class="src-doc">&nbsp;*&nbsp;6.A.eat&nbsp;B.&nbsp;eating&nbsp;C.&nbsp;have&nbsp;eaten&nbsp;D.&nbsp;being&nbsp;eaten</span></div></li>
<li><div class="src-line"><a name="a45"></a><span class="src-doc">&nbsp;*&nbsp;7.A.on&nbsp;B.&nbsp;by&nbsp;C.&nbsp;up&nbsp;D.&nbsp;to</span></div></li>
<li><div class="src-line"><a name="a46"></a><span class="src-doc">&nbsp;*&nbsp;8.A.more&nbsp;B.&nbsp;less&nbsp;C.&nbsp;few&nbsp;D.&nbsp;small</span></div></li>
<li><div class="src-line"><a name="a47"></a><span class="src-doc">&nbsp;*&nbsp;9.A.dead&nbsp;B.&nbsp;dying&nbsp;C.&nbsp;died&nbsp;D.&nbsp;was&nbsp;dying</span></div></li>
<li><div class="src-line"><a name="a48"></a><span class="src-doc">&nbsp;*&nbsp;10.A.on&nbsp;B.&nbsp;up&nbsp;C.&nbsp;in&nbsp;D.to</span></div></li>
<li><div class="src-line"><a name="a49"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;选项结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a50"></a><span class="src-doc">&nbsp;*&nbsp;(2)A:Hi&nbsp;,Nancy&nbsp;.&nbsp;&nbsp;&nbsp;B:Hi,Yang&nbsp;Ling.&nbsp;A:&nbsp;Glad_(1)_see&nbsp;you.</span></div></li>
<li><div class="src-line"><a name="a51"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;B:Glad&nbsp;to&nbsp;see&nbsp;you,_(2)_.&nbsp;A:What’s&nbsp;that&nbsp;_(3)_the&nbsp;chair.</span></div></li>
<li><div class="src-line"><a name="a52"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;B:Oh,&nbsp;it’s&nbsp;_(4)_family&nbsp;photo.A:Can_(5)_have&nbsp;a&nbsp;look.</span></div></li>
<li><div class="src-line"><a name="a53"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;B:Sure.&nbsp;A:_(6)_&nbsp;he&nbsp;your&nbsp;brother&nbsp;David？.&nbsp;B:No,_(7)_Mike.</span></div></li>
<li><div class="src-line"><a name="a54"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;A:Oh&nbsp;,&nbsp;I&nbsp;see.He&nbsp;is&nbsp;Helen’s_(8)_.&nbsp;B:Yes’he&nbsp;is.It’s&nbsp;time&nbsp;_(9)_go&nbsp;home.</span></div></li>
<li><div class="src-line"><a name="a55"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;&nbsp;A:OK.Let’s&nbsp;go&nbsp;home.</span></div></li>
<li><div class="src-line"><a name="a56"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;正文结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a57"></a><span class="src-doc">&nbsp;*&nbsp;1、A.&nbsp;two&nbsp;&nbsp;B.&nbsp;to&nbsp;&nbsp;C.&nbsp;too</span></div></li>
<li><div class="src-line"><a name="a58"></a><span class="src-doc">&nbsp;*&nbsp;2、A.&nbsp;two&nbsp;&nbsp;B.&nbsp;to&nbsp;&nbsp;C.&nbsp;too</span></div></li>
<li><div class="src-line"><a name="a59"></a><span class="src-doc">&nbsp;*&nbsp;3、A.&nbsp;on&nbsp;&nbsp;B.&nbsp;to&nbsp;&nbsp;&nbsp;C.&nbsp;in</span></div></li>
<li><div class="src-line"><a name="a60"></a><span class="src-doc">&nbsp;*&nbsp;4、A.&nbsp;I&nbsp;&nbsp;&nbsp;B.&nbsp;he’s&nbsp;&nbsp;C.&nbsp;my</span></div></li>
<li><div class="src-line"><a name="a61"></a><span class="src-doc">&nbsp;*&nbsp;5、A.&nbsp;she&nbsp;&nbsp;B.&nbsp;I&nbsp;&nbsp;&nbsp;C.&nbsp;he’s</span></div></li>
<li><div class="src-line"><a name="a62"></a><span class="src-doc">&nbsp;*&nbsp;6、A.Is&nbsp;&nbsp;&nbsp;B.&nbsp;Are&nbsp;&nbsp;&nbsp;C.&nbsp;Am</span></div></li>
<li><div class="src-line"><a name="a63"></a><span class="src-doc">&nbsp;*&nbsp;7、A.&nbsp;I’m&nbsp;&nbsp;B.&nbsp;you’re&nbsp;&nbsp;C.&nbsp;he’s</span></div></li>
<li><div class="src-line"><a name="a64"></a><span class="src-doc">&nbsp;*&nbsp;8、A.&nbsp;brother&nbsp;&nbsp;B.&nbsp;friend&nbsp;&nbsp;C.&nbsp;uncle</span></div></li>
<li><div class="src-line"><a name="a65"></a><span class="src-doc">&nbsp;*&nbsp;9、A.&nbsp;two&nbsp;&nbsp;B.&nbsp;to&nbsp;&nbsp;C.&nbsp;too</span></div></li>
<li><div class="src-line"><a name="a66"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;选项结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a67"></a><span class="src-doc">&nbsp;*&nbsp;(3)A：_(1)_the&nbsp;time&nbsp;,please,mum?&nbsp;&nbsp;&nbsp;B:_(2)_nine_(3)_.Nancy,you&nbsp;can&nbsp;go&nbsp;to_(4)_now.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A:OK,mum.&nbsp;_(5)_the&nbsp;TV,please.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B:&nbsp;OK.</span></div></li>
<li><div class="src-line"><a name="a68"></a><span class="src-doc">&nbsp;*&nbsp;&nbsp;A:&nbsp;Good&nbsp;night&nbsp;,mum.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B:&nbsp;_(6)_.</span></div></li>
<li><div class="src-line"><a name="a69"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;正文结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a70"></a><span class="src-doc">&nbsp;*&nbsp;1、A.What&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;What’s&nbsp;&nbsp;&nbsp;C.&nbsp;Who&nbsp;&nbsp;&nbsp;D.Who’s</span></div></li>
<li><div class="src-line"><a name="a71"></a><span class="src-doc">&nbsp;*&nbsp;2、A.It’s&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;B.It&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C.It’s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.It&nbsp;a</span></div></li>
<li><div class="src-line"><a name="a72"></a><span class="src-doc">&nbsp;*&nbsp;3、A.clock&nbsp;&nbsp;&nbsp;&nbsp;B.&nbsp;\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C.&nbsp;o’clock&nbsp;&nbsp;D.B&amp;C</span></div></li>
<li><div class="src-line"><a name="a73"></a><span class="src-doc">&nbsp;*&nbsp;4、A.home&nbsp;&nbsp;&nbsp;B.bed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C.school&nbsp;&nbsp;&nbsp;&nbsp;D.up</span></div></li>
<li><div class="src-line"><a name="a74"></a><span class="src-doc">&nbsp;*&nbsp;5、A.Turn&nbsp;off&nbsp;&nbsp;B.&nbsp;Close&nbsp;&nbsp;C.&nbsp;Turn&nbsp;on&nbsp;&nbsp;&nbsp;D.Open</span></div></li>
<li><div class="src-line"><a name="a75"></a><span class="src-doc">&nbsp;*&nbsp;6、A&nbsp;Goodbye&nbsp;&nbsp;B.See&nbsp;you&nbsp;&nbsp;&nbsp;C.Good&nbsp;night&nbsp;D.Bye</span></div></li>
<li><div class="src-line"><a name="a76"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;选项结束&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a77"></a><span class="src-doc">&nbsp;*&nbsp;===&lt;&lt;&lt;完形填空&gt;&gt;&gt;===</span></div></li>
<li><div class="src-line"><a name="a78"></a><span class="src-doc">&nbsp;*&nbsp;&lt;/pre&gt;</span></div></li>
<li><div class="src-line"><a name="a79"></a><span class="src-doc">&nbsp;*&nbsp;</span></div></li>
<li><div class="src-line"><a name="a80"></a><span class="src-doc">&nbsp;*&nbsp;</span><span class="src-doc-coretag">@author</span><span class="src-doc">&nbsp;KNIGHTRCOM</span></div></li>
<li><div class="src-line"><a name="a81"></a><span class="src-doc">&nbsp;*&nbsp;</span><span class="src-doc-coretag">@version</span><span class="src-doc">&nbsp;0.9</span></div></li>
<li><div class="src-line"><a name="a82"></a><span class="src-doc">&nbsp;*/</span></div></li>
<li><div class="src-line"><a name="a83"></a><span class="src-key">class&nbsp;</span><a href="../questions/QuestionClozeTestProcessor.html">QuestionClozeTestProcessor</a>&nbsp;<span class="src-key">extends&nbsp;</span><a href="../questions/QuestionBaseProcessor.html">QuestionBaseProcessor</a>&nbsp;<span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a84"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a85"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../questions/QuestionClozeTestProcessor.html#methoddefineStyles">defineStyles</a><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a86"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">qnp&nbsp;</span>=&nbsp;<span class="src-str">'[（]?\b\d{1,2}[）、.．]'</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;question&nbsp;number&nbsp;pattern</span></div></li>
<li><div class="src-line"><a name="a87"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">onp&nbsp;</span>=&nbsp;<span class="src-str">'[(（]?\b[A-Z][）).．、]'</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;option&nbsp;number&nbsp;pattern</span></div></li>
<li><div class="src-line"><a name="a88"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">otp&nbsp;</span>=&nbsp;<span class="src-str">'.+'</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;option&nbsp;text&nbsp;pattern</span></div></li>
<li><div class="src-line"><a name="a89"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">qop&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'(.+?)'</span><span class="src-sym">,&nbsp;</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-var">$PATTERNS</span><span class="src-sym">[</span><span class="src-id">QuestionType</span><span class="src-sym">::</span><span class="src-id">_CLOZE_TEST_TEXT_END</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span></div></li>
<li><div class="src-line"><a name="a90"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-str">'(.+?)'</span><span class="src-sym">,&nbsp;&nbsp;</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-var">$PATTERNS</span><span class="src-sym">[</span><span class="src-id">QuestionType</span><span class="src-sym">::</span><span class="src-id">_CLOZE_TEST_OPTION_END</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;question&nbsp;pattern</span></div></li>
<li><div class="src-line"><a name="a91"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a92"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a93"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../questions/QuestionClozeTestProcessor.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a94"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;定义题型样式</span></div></li>
<li><div class="src-line"><a name="a95"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$qp&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">qop</span><span class="src-sym">,&nbsp;</span><span class="src-str">'us'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a96"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a97"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;提取题型</span></div></li>
<li><div class="src-line"><a name="a98"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionOptionTextArray&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a99"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.php.net/preg_match_all">preg_match_all</a><span class="src-sym">(</span><span class="src-var">$qp</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-var">$PATTERNS</span><span class="src-sym">[</span><span class="src-id">QuestionType</span><span class="src-sym">::</span><span class="src-id">CLOZE_TEST</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-str">'us'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#var$_sectionText">_sectionText</a><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$questionOptionTextArray</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a100"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if&nbsp;</span><span class="src-sym">(</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$questionOptionTextArray</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-num">0&nbsp;</span>||&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$questionOptionTextArray</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-num">0</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a101"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">return&nbsp;</span><span class="src-id">null</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a102"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a103"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a104"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;处理题型</span></div></li>
<li><div class="src-line"><a name="a105"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionArray&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a106"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionTextArray&nbsp;</span>=&nbsp;<span class="src-var">$questionOptionTextArray</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;每个问题的文章部分</span></div></li>
<li><div class="src-line"><a name="a107"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionOptionSetTextArray&nbsp;</span>=&nbsp;<span class="src-var">$questionOptionTextArray</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;每个问题文章后面的选项部分</span></div></li>
<li><div class="src-line"><a name="a108"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">for&nbsp;</span><span class="src-sym">(</span><span class="src-var">$i&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-var">$i&nbsp;</span>&lt;&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$questionTextArray</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$i</span>++<span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a109"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;拆解每个题型并生成对应的Question</span></div></li>
<li><div class="src-line"><a name="a110"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$question&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../questions/Question.html">Question</a></span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;大问题部分</span></div></li>
<li><div class="src-line"><a name="a111"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$question</span><span class="src-sym">-&gt;</span><span class="src-id">Set_content</span><span class="src-sym">(</span><a href="../questions/_util---question_sysext.php.html#functionext_trim">ext_trim</a><span class="src-sym">(</span><span class="src-var">$questionTextArray</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a112"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$question</span><span class="src-sym">-&gt;</span><span class="src-id">Set_type</span><span class="src-sym">(</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-id">CLOZE_TEST</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a113"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$question</span><span class="src-sym">-&gt;</span><span class="src-id">Set_questions</span><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a114"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subQuestionArray&nbsp;</span>=&nbsp;<span class="src-sym">&amp;</span><span class="src-var">$question</span><span class="src-sym">-&gt;</span><span class="src-id">Get_questions</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a115"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionArray</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$question</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;追加大问题</span></div></li>
<li><div class="src-line"><a name="a116"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a117"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;生成子问题以及选项</span></div></li>
<li><div class="src-line"><a name="a118"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionOptionSetText&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a119"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.php.net/preg_match_all">preg_match_all</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">qnp</span><span class="src-sym">,&nbsp;</span><span class="src-str">'.+?(?=(?:\n'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">qnp</span><span class="src-sym">,&nbsp;</span><span class="src-str">'|$))'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'us'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$questionOptionSetTextArray</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$questionOptionSetText</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a120"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$questionOptionSetText&nbsp;</span>=&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$questionOptionSetText</span><span class="src-sym">)&nbsp;</span>&gt;&nbsp;<span class="src-num">0&nbsp;</span>?&nbsp;<span class="src-var">$questionOptionSetText</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-id">null</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a121"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if&nbsp;</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$questionOptionSetText</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a122"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a123"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a124"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">foreach&nbsp;</span><span class="src-sym">(</span><span class="src-var">$questionOptionSetText&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$optionTextArray</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a125"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subQuestion&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../questions/Question.html">Question</a></span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;子问题</span></div></li>
<li><div class="src-line"><a name="a126"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subQuestion</span><span class="src-sym">-&gt;</span><span class="src-id">Set_type</span><span class="src-sym">(</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-id">CLOZE_TEST</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a127"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subQuestion</span><span class="src-sym">-&gt;</span><span class="src-id">Set_options</span><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a128"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subQuestionArray</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$subQuestion</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;追加子问题</span></div></li>
<li><div class="src-line"><a name="a129"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subOptionArray&nbsp;</span>=&nbsp;<span class="src-sym">&amp;</span><span class="src-var">$subQuestion</span><span class="src-sym">-&gt;</span><span class="src-id">Get_options</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a130"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;整理每个选项组</span></div></li>
<li><div class="src-line"><a name="a131"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$optionSetTextArray&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a132"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.php.net/preg_match_all">preg_match_all</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">onp</span><span class="src-sym">,&nbsp;</span><span class="src-str">'.+?'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'(?:(?='</span><span class="src-sym">,&nbsp;</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">onp</span><span class="src-sym">,&nbsp;</span><span class="src-str">')|(?=$))'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'us'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$optionTextArray</span><span class="src-sym">,&nbsp;</span><span class="src-var">$optionSetTextArray</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a133"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">foreach&nbsp;</span><span class="src-sym">(</span><span class="src-var">$optionSetTextArray&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$eachOptionTextArray</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a134"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">foreach&nbsp;</span><span class="src-sym">(</span><span class="src-var">$eachOptionTextArray&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$eachOptionText</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a135"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$option&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../questions/Option.html">Option</a></span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a136"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$option</span><span class="src-sym">-&gt;</span><span class="src-id">Set_option_content</span><span class="src-sym">(</span><a href="../questions/_util---question_sysext.php.html#functionext_trim">ext_trim</a><span class="src-sym">(</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">onp</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$eachOptionText</span><span class="src-sym">)))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a137"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$option</span><span class="src-sym">-&gt;</span><span class="src-id">Set_item_tag</span><span class="src-sym">(</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../questions/QuestionBaseProcessor.html#methodpatterning">patterning</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'('</span><span class="src-sym">,&nbsp;</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">onp</span><span class="src-sym">,&nbsp;</span><span class="src-str">').+'</span><span class="src-sym">))</span><span class="src-sym">,&nbsp;</span><span class="src-str">'$1'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$eachOptionText</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a138"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$option</span><span class="src-sym">-&gt;</span><span class="src-id">Set_type</span><span class="src-sym">(</span><span class="src-id"><a href="../questions/QuestionType.html">QuestionType</a></span><span class="src-sym">::</span><span class="src-id">CLOZE_TEST</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a139"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$subOptionArray</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$option</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a140"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a141"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a142"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a143"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a144"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a145"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-comm">//&nbsp;返回结果</span></div></li>
<li><div class="src-line"><a name="a146"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">return&nbsp;</span><span class="src-var">$questionArray</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a147"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a148"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a149"></a><span class="src-sym">}</span></div></li>
</ol></div>
</div>
	<p class="notes" id="credit">
		Documentation generated on Wed, 18 Aug 2010 02:01:44 +0000 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</body>
</html>